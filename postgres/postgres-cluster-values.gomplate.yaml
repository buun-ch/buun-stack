version:
  postgresql: {{ .Env.POSTGRES_VERSION | quote }}

cluster:
  instances: 1

  # Security configuration for restricted Pod Security Standards
  seccompProfile:
    type: RuntimeDefault

  # Resource configuration (Guaranteed QoS)
  resources:
    requests:
      cpu: 200m
      memory: 1Gi
    limits:
      cpu: 200m
      memory: 1Gi

  # Storage configuration
  storage:
    size: {{ .Env.POSTGRES_STORAGE_SIZE }}

  # PostgreSQL configuration
  postgresql:
    parameters:
      max_connections: {{ .Env.POSTGRES_MAX_CONNECTIONS | quote }}

  initdb:
    postInitTemplateSQL:
      - CREATE EXTENSION IF NOT EXISTS vector;

  enableSuperuserAccess: true
  superuserSecret: postgres-cluster-superuser
